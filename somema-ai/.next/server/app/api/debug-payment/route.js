(()=>{var e={};e.id=1970,e.ids=[1970],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83152:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{POST:()=>p});var o=t(96559),a=t(48088),n=t(37719),i=t(32190),u=t(55511),c=t.n(u);async function p(e){try{let{razorpay_order_id:r,razorpay_payment_id:s,razorpay_signature:o}=await e.json();console.log("\uD83D\uDD0D Payment Debug - Input Parameters:"),console.log("Order ID:",r),console.log("Payment ID:",s),console.log("Signature:",o?.substring(0,20)+"...");let a={RAZORPAY_KEY_ID:!!process.env.RAZORPAY_KEY_ID,RAZORPAY_KEY_SECRET:!!process.env.RAZORPAY_KEY_SECRET,NEXT_PUBLIC_RAZORPAY_KEY_ID:!0};if(console.log("\uD83D\uDD27 Environment Variables Check:",a),!process.env.RAZORPAY_KEY_SECRET)return i.NextResponse.json({error:"RAZORPAY_KEY_SECRET not configured",envCheck:a},{status:500});let n=r+"|"+s,u=c().createHmac("sha256",process.env.RAZORPAY_KEY_SECRET).update(n.toString()).digest("hex"),p=u===o;console.log("\uD83D\uDD10 Signature Verification:"),console.log("Expected:",u.substring(0,20)+"..."),console.log("Received:",o?.substring(0,20)+"..."),console.log("Match:",p);let l={success:!1,error:null,paymentDetails:null};try{let e=new(t(95457))({key_id:process.env.RAZORPAY_KEY_ID,key_secret:process.env.RAZORPAY_KEY_SECRET}),r=await e.payments.fetch(s);l={success:!0,error:null,paymentDetails:{id:r.id,status:r.status,amount:r.amount,currency:r.currency,method:r.method,created_at:r.created_at}},console.log("✅ Razorpay API Test Success:",l.paymentDetails)}catch(e){l={success:!1,error:e.message,paymentDetails:null},console.log("❌ Razorpay API Test Failed:",e.message)}return i.NextResponse.json({success:!0,debug:{inputValidation:{hasOrderId:!!r,hasPaymentId:!!s,hasSignature:!!o},envCheck:a,signatureVerification:{match:p,expectedSignature:u.substring(0,20)+"...",receivedSignature:o?.substring(0,20)+"..."},razorpayApiTest:l}})}catch(e){return console.error("❌ Payment Debug Error:",e),i.NextResponse.json({error:"Debug failed",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/debug-payment/route",pathname:"/api/debug-payment",filename:"route",bundlePath:"app/api/debug-payment/route"},resolvedPagePath:"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/api/debug-payment/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:g,serverHooks:m}=l;function x(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:g})}},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580,139,5457],()=>t(83152));module.exports=s})();