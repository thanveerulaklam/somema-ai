(()=>{var e={};e.id=2772,e.ids=[2772],e.modules={891:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>h,serverHooks:()=>p,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>u});var o=r(96559),n=r(48088),a=r(37719),i=r(32190),c=r(14914);async function u(e){try{let e=(0,c.Zv)(),t="healthy"===e.status||"degraded"===e.status?200:503;return i.NextResponse.json(e,{status:t})}catch(e){return console.error("Health check error:",e),i.NextResponse.json({status:"unhealthy",timestamp:new Date().toISOString(),error:"Health check failed"},{status:503})}}let h=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/health/route",pathname:"/api/health",filename:"route",bundlePath:"app/api/health/route"},resolvedPagePath:"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/api/health/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:p}=h;function m(){return(0,a.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14914:(e,t,r)=>{"use strict";r.d(t,{Gw:()=>h,Zv:()=>d});let s={ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug"},o={REQUEST_COUNT:"request_count",RESPONSE_TIME:"response_time",ERROR_COUNT:"error_count"};class n{addLog(e){this.logs.push(e),this.logs.length>1e3&&(this.logs=this.logs.slice(-1e3))}addMetric(e){this.metrics.push(e),this.metrics.length>1e4&&(this.metrics=this.metrics.slice(-1e4))}getLogs(e){return e?this.logs.filter(t=>Object.entries(e).every(([e,r])=>t[e]===r)):this.logs}getMetrics(e){return e?this.metrics.filter(t=>Object.entries(e).every(([e,r])=>t[e]===r)):this.metrics}updatePerformanceMetrics(e,t,r,s){let o=`${t}:${e}`,n=this.performanceMetrics.get(o);n?(n.requestCount++,n.averageResponseTime=(n.averageResponseTime+r)/2,n.errorRate=s?n.errorRate+1:n.errorRate,n.successRate=n.requestCount-n.errorRate,n.lastUpdated=new Date().toISOString()):this.performanceMetrics.set(o,{endpoint:e,method:t,averageResponseTime:r,requestCount:1,errorRate:+!!s,successRate:+!s,lastUpdated:new Date().toISOString()})}getPerformanceMetrics(){return Array.from(this.performanceMetrics.values())}getAlertHistory(e){return this.alertHistory.get(e)||0}setAlertHistory(e,t){this.alertHistory.set(e,t)}constructor(){this.logs=[],this.metrics=[],this.performanceMetrics=new Map,this.alertHistory=new Map}}let a=new n;class i{constructor(e={}){this.context=e}log(e,t,r){let s={timestamp:new Date().toISOString(),level:e,message:t,context:this.context,metadata:r};a.addLog(s)}info(e,t){this.log(s.INFO,e,t)}warn(e,t){this.log(s.WARN,e,t)}error(e,t){this.log(s.ERROR,e,t)}debug(e,t){this.log(s.DEBUG,e,t)}}class c{constructor(e={}){this.context=e}record(e,t,r={}){let s={timestamp:new Date().toISOString(),metric:e,value:t,tags:{...this.context,...r}};a.addMetric(s)}incrementCounter(e,t={}){this.record(e,1,t)}recordGauge(e,t,r={}){this.record(e,t,r)}recordHistogram(e,t,r={}){this.record(e,t,r)}}class u{constructor(e,t,r){this.startTime=Date.now(),this.requestId=e,this.endpoint=t,this.method=r}end(e=!1){let t=Date.now()-this.startTime;a.updatePerformanceMetrics(this.endpoint,this.method,t,e);let r=new c({request_id:this.requestId,endpoint:this.endpoint,method:this.method});return r.recordHistogram(o.RESPONSE_TIME,t),r.incrementCounter(o.REQUEST_COUNT),e&&r.incrementCounter(o.ERROR_COUNT),t}}function h(e){let t=`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r=e.nextUrl.pathname,s=e.method,o=e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"unknown",n=new i({requestId:t,endpoint:r,method:s,ip:o,userAgent:e.headers.get("user-agent")||"unknown"});return{logger:n,metrics:new c({request_id:t,endpoint:r,method:s,ip:o}),performance:new u(t,r,s)}}function d(){let e=a.getPerformanceMetrics(),t=e.reduce((e,t)=>e+t.requestCount,0),r=e.reduce((e,t)=>e+t.errorRate,0),s=t>0?r/t*100:0,o=e.length>0?e.reduce((e,t)=>e+t.averageResponseTime,0)/e.length:0;return{status:s>10?"degraded":"healthy",timestamp:new Date().toISOString(),version:"1.0.0",uptime:process.uptime(),metrics:{totalRequests:t,errorRate:Math.round(100*s)/100,averageResponseTime:Math.round(100*o)/100},dependencies:{database:"healthy",externalAPIs:"healthy"}}}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,580],()=>r(891));module.exports=s})();