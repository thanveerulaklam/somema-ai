(()=>{var e={};e.id=7471,e.ids=[7471],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17430:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>l,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>c});var s={};t.r(s),t.d(s,{POST:()=>u});var a=t(96559),o=t(48088),n=t(37719),i=t(32190);async function u(e){try{let r,{imageUrl:t}=await e.json();if(!t)return i.NextResponse.json({error:"Image URL is required"},{status:400});let s=process.env.REMOVE_BG_API_KEY;if(!s)return i.NextResponse.json({error:"Remove.bg API key not configured"},{status:500});if(t.startsWith("data:image/")){let e=t.match(/data:image\/[^;]+;base64,(.+)/);if(!e)return i.NextResponse.json({error:"Invalid data URL format"},{status:400});r=e[1]}else{if(t.startsWith("blob:"))return console.error("Blob URL received on server side - this should not happen"),i.NextResponse.json({error:"Invalid image URL format. Please try uploading the image again."},{status:400});let e=await fetch(t);if(!e.ok)return i.NextResponse.json({error:"Failed to download image"},{status:400});let s=await e.arrayBuffer();r=Buffer.from(s).toString("base64")}let a=await fetch("https://api.remove.bg/v1.0/removebg",{method:"POST",headers:{"X-Api-Key":s,"Content-Type":"application/json"},body:JSON.stringify({image_file_b64:r,size:"auto",format:"png"})});if(!a.ok){let e=await a.text();return console.error("Remove.bg API error:",e),i.NextResponse.json({error:"Failed to remove background"},{status:500})}let o=await a.arrayBuffer(),n=Buffer.from(o).toString("base64");return i.NextResponse.json({success:!0,imageData:`data:image/png;base64,${n}`})}catch(e){return console.error("Background removal error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/remove-background/route",pathname:"/api/remove-background",filename:"route",bundlePath:"app/api/remove-background/route"},resolvedPagePath:"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/api/remove-background/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:c,serverHooks:l}=p;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:c})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,580],()=>t(17430));module.exports=s})();