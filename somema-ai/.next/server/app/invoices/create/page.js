(()=>{var e={};e.id=532,e.ids=[532],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4119:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/invoices/create/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/invoices/create/page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},12294:(e,s,t)=>{"use strict";t.d(s,{$:()=>l});var r=t(60687),i=t(43210),a=t.n(i),n=t(96241);let l=a().forwardRef(({className:e,variant:s="primary",size:t="md",loading:i=!1,children:a,disabled:l,...d},o)=>(0,r.jsxs)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-blue-600 text-white hover:bg-blue-700 border border-blue-600",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 border border-gray-200",outline:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-50",ghost:"text-gray-900 hover:bg-gray-100",destructive:"bg-red-600 text-white hover:bg-red-700 border border-red-600"}[s],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[t],e),ref:o,disabled:l||i,...d,children:[i&&(0,r.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]}));l.displayName="Button"},15434:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(60687),i=t(43210),a=t(16189);t(16396);var n=t(12294),l=t(48444);function d({planId:e,billingCycle:s,onInvoiceCreated:t,onCancel:a,user:d}){let[o,c]=(0,i.useState)("individual"),[u,m]=(0,i.useState)({businessName:"",gstNumber:"",businessAddress:{line1:"",line2:"",city:"",state:"",pincode:"",country:"India"},businessType:"proprietorship"}),[p,x]=(0,i.useState)({address:"",address2:"",city:"",state:"",pincode:"",country:"India"}),[h,b]=(0,i.useState)(!1),[g,v]=(0,i.useState)([]),f=()=>{let e=[];return"business"===o&&(u.businessName.trim()||e.push("Business name is required"),u.gstNumber&&!/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(u.gstNumber.toUpperCase())&&e.push("Invalid GST number format"),u.businessAddress.line1.trim()||e.push("Business address is required"),u.businessAddress.city.trim()||e.push("Business city is required"),u.businessAddress.state.trim()||e.push("Business state is required"),/^\d{6}$/.test(u.businessAddress.pincode)||e.push("Valid 6-digit pincode is required")),p.address.trim()||e.push("Billing address is required"),p.city.trim()||e.push("Billing city is required"),p.state.trim()||e.push("Billing state is required"),/^\d{6}$/.test(p.pincode)||e.push("Valid 6-digit billing pincode is required"),v(e),0===e.length},y=async r=>{if(r.preventDefault(),f()){b(!0),v([]);try{console.log("\uD83D\uDE80 Sending invoice creation request..."),console.log("\uD83D\uDC64 User data:",{id:d.id,email:d.email});let r=await fetch("/api/invoices/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:d.id,planId:e,billingCycle:s,customerType:o,businessInfo:"business"===o?u:{},billingInfo:p})}),i=await r.json();i.success?t(i.invoice):v([i.error||"Failed to create invoice"])}catch(e){console.error("Error creating invoice:",e),v(["Failed to create invoice. Please try again."])}finally{b(!1)}}},j=(e,s)=>{if(e.includes(".")){let[t,r]=e.split(".");m(e=>({...e,[t]:{...e[t]||{},[r]:s}}))}else m(t=>({...t,[e]:s}))},N=(e,s)=>{x(t=>({...t,[e]:s}))};return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Create Invoice"}),g.length>0&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("ul",{className:"text-red-600 text-sm",children:g.map((e,s)=>(0,r.jsxs)("li",{children:["• ",e]},s))})}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Type"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",value:"individual",checked:"individual"===o,onChange:e=>c(e.target.value),className:"mr-2"}),"Individual"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",value:"business",checked:"business"===o,onChange:e=>c(e.target.value),className:"mr-2"}),"Business"]})]})]}),"business"===o&&(0,r.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Business Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name *"}),(0,r.jsx)(l.p,{type:"text",value:u.businessName,onChange:e=>j("businessName",e.target.value),placeholder:"Enter business name",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GST Number"}),(0,r.jsx)(l.p,{type:"text",value:u.gstNumber,onChange:e=>j("gstNumber",e.target.value.toUpperCase()),placeholder:"22AAAAA0000A1Z5",maxLength:15}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Format: 22AAAAA0000A1Z5 (15 characters)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),(0,r.jsxs)("select",{value:u.businessType,onChange:e=>j("businessType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"proprietorship",children:"Proprietorship"}),(0,r.jsx)("option",{value:"partnership",children:"Partnership"}),(0,r.jsx)("option",{value:"llp",children:"LLP"}),(0,r.jsx)("option",{value:"private_limited",children:"Private Limited"}),(0,r.jsx)("option",{value:"public_limited",children:"Public Limited"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address Line 1 *"}),(0,r.jsx)(l.p,{type:"text",value:u.businessAddress.line1,onChange:e=>j("businessAddress.line1",e.target.value),placeholder:"Enter business address",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address Line 2"}),(0,r.jsx)(l.p,{type:"text",value:u.businessAddress.line2,onChange:e=>j("businessAddress.line2",e.target.value),placeholder:"Enter additional address details"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,r.jsx)(l.p,{type:"text",value:u.businessAddress.city,onChange:e=>j("businessAddress.city",e.target.value),placeholder:"Enter city",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,r.jsx)(l.p,{type:"text",value:u.businessAddress.state,onChange:e=>j("businessAddress.state",e.target.value),placeholder:"Enter state",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode *"}),(0,r.jsx)(l.p,{type:"text",value:u.businessAddress.pincode,onChange:e=>j("businessAddress.pincode",e.target.value),placeholder:"Enter 6-digit pincode",maxLength:6,pattern:"[0-9]{6}",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Billing Information"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Billing Address Line 1 *"}),(0,r.jsx)(l.p,{type:"text",value:p.address,onChange:e=>N("address",e.target.value),placeholder:"Enter billing address",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Billing Address Line 2"}),(0,r.jsx)(l.p,{type:"text",value:p.address2,onChange:e=>N("address2",e.target.value),placeholder:"Enter additional address details"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,r.jsx)(l.p,{type:"text",value:p.city,onChange:e=>N("city",e.target.value),placeholder:"Enter city",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,r.jsx)(l.p,{type:"text",value:p.state,onChange:e=>N("state",e.target.value),placeholder:"Enter state",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode *"}),(0,r.jsx)(l.p,{type:"text",value:p.pincode,onChange:e=>N("pincode",e.target.value),placeholder:"Enter 6-digit pincode",maxLength:6,pattern:"[0-9]{6}",required:!0})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)(n.$,{type:"button",onClick:a,variant:"outline",disabled:h,children:"Cancel"}),(0,r.jsx)(n.$,{type:"submit",disabled:h,className:"bg-blue-600 hover:bg-blue-700",children:h?"Creating Invoice...":"Create Invoice"})]})]})]})}function o(){let e=(0,a.useRouter)();(0,a.useSearchParams)();let[s,t]=(0,i.useState)(null),[n,l]=(0,i.useState)(!0),[o,c]=(0,i.useState)(""),[u,m]=(0,i.useState)("monthly");return n?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,r.jsx)(d,{planId:o,billingCycle:u,onInvoiceCreated:s=>{s.short_url?window.location.href=s.short_url:(alert("Invoice created successfully!"),e.push("/invoices"))},onCancel:()=>{e.push("/pricing")},user:s})})}):null}function c(){return(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,r.jsx)(o,{})})}},16396:(e,s,t)=>{"use strict";t.d(s,{$G:()=>i,ND:()=>r});let r=(0,t(59522).createBrowserClient)("https://yfmypikqgegvookjzvyv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbXlwaWtxZ2Vndm9va2p6dnl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTU3NDMsImV4cCI6MjA2NjMzMTc0M30.BX62nqWwNu23pRQYrzoR9EetesEkac3ZdAu2KKXwNxs",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"quely-ai-web"}}}),i=()=>"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbXlwaWtxZ2Vndm9va2p6dnl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTU3NDMsImV4cCI6MjA2NjMzMTc0M30.BX62nqWwNu23pRQYrzoR9EetesEkac3ZdAu2KKXwNxs"},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},39727:()=>{},46055:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(31658);let i=async e=>[{type:"image/x-icon",sizes:"500x500",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},47990:()=>{},48444:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var r=t(60687),i=t(43210),a=t.n(i),n=t(96241);let l=a().forwardRef(({className:e,type:s,label:t,error:a,helperText:l,id:d,...o},c)=>{let u=(0,i.useId)(),m=d||`input-${u}`;return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a&&"border-red-500 focus-visible:ring-red-500",e),ref:c,id:m,...o}),a&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a}),l&&!a&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});l.displayName="Input"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=t(65239),i=t(48088),a=t(88170),n=t.n(a),l=t(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o={children:["",{children:["invoices",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4119)),"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/invoices/create/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/invoices/create/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/invoices/create/page",pathname:"/invoices/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66492:(e,s,t)=>{Promise.resolve().then(t.bind(t,15434))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80060:(e,s,t)=>{Promise.resolve().then(t.bind(t,4119))},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96241:(e,s,t)=>{"use strict";t.d(s,{cn:()=>a});var r=t(49384),i=t(82348);function a(...e){return(0,i.QP)((0,r.$)(e))}async function n(e){try{console.log("\uD83D\uDD04 Trying fallback HEIC conversion...");let s=await fetch(e),t=await s.blob(),r=document.createElement("canvas"),i=r.getContext("2d");if(!i)throw Error("Canvas context not available");let a=new Image;return new Promise((e,s)=>{a.onload=()=>{try{r.width=a.width,r.height=a.height,i.drawImage(a,0,0);let s=r.toDataURL("image/jpeg",.9);console.log("✅ Fallback HEIC conversion successful"),e(s)}catch(e){console.error("❌ Fallback conversion failed:",e),s(e)}},a.onerror=()=>{console.error("❌ Failed to load image for fallback conversion"),s(Error("Failed to load image"))},a.src=URL.createObjectURL(t)})}catch(e){throw console.error("❌ Fallback HEIC conversion failed:",e),e}}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,3078,1658,9522,9069,6100],()=>t(58029));module.exports=r})();