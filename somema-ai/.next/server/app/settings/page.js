(()=>{var e={};e.id=4662,e.ids=[4662],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5336:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8819:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9005:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11312:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>$});var a=t(60687),r=t(43210),i=t(16189),n=t(85814),l=t.n(n),c=t(16396),d=t(12294),o=t(48444),m=t(63302),x=t(21957),h=t(62688);let u=(0,h.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var p=t(19526);let g=(0,h.A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var y=t(66232),b=t(5336),j=t(93613);function f({onConnected:e}){let[s,t]=(0,r.useState)([]),[i,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),N=async()=>{o(!0),x("");try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)return;let s=await fetch("/api/meta/connect",{headers:{Authorization:`Bearer ${e.id}`}});if(!s.ok){let e=await s.json();if("Meta account not connected"===e.error){t([]),n([]);return}throw Error(e.error||"Failed to fetch Meta connections")}let a=await s.json();t(a.available||[]),n(a.connected||[])}catch(e){console.error("Error fetching Meta connections:",e),x(e.message||"Failed to fetch Meta connections")}finally{o(!1)}},v=async(e,s)=>{o(!0),x(""),f("");try{let{data:{user:t}}=await c.ND.auth.getUser();if(!t)throw Error("User not authenticated");let a=await fetch("/api/meta/connect",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.id}`},body:JSON.stringify({pageId:e,instagramId:s})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to connect")}let r=await a.json();n(r.connected||[]),f("Connected successfully! Previous connections have been disconnected."),setTimeout(()=>N(),500)}catch(e){x(e.message||"Failed to connect")}finally{o(!1)}},w=async(e,s)=>{o(!0),x(""),f("");try{let{data:{user:t}}=await c.ND.auth.getUser();if(!t)throw Error("User not authenticated");let a=await fetch("/api/meta/connect",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.id}`},body:JSON.stringify({pageId:e,instagramId:s})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to disconnect")}f("Disconnected successfully!"),N()}catch(e){x(e.message||"Failed to disconnect")}finally{o(!1)}},k=async()=>{if(window.confirm("Are you sure you want to disconnect all accounts?")){o(!0),x(""),f("");try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)throw Error("User not authenticated");let{error:s}=await c.ND.from("user_profiles").update({meta_credentials:{}}).eq("user_id",e.id);if(s)throw s;n([]),f("All accounts disconnected!"),N()}catch(e){x(e.message||"Failed to disconnect all")}finally{o(!1)}}},_=async()=>{o(!0),x(""),f("");try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)throw Error("User not authenticated");let s=await fetch("/api/meta/connect",{method:"PATCH",headers:{Authorization:`Bearer ${e.id}`}});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to cleanup connections")}let t=await s.json();f(t.message||"Connections cleaned up successfully!"),N()}catch(e){x(e.message||"Failed to cleanup connections")}finally{o(!1)}},A=()=>{window.location.href="/api/meta/oauth"},C=(e,s)=>i.some(t=>t.pageId===e&&t.instagramId===s);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:k,disabled:l||0===i.length,children:"Disconnect All"}),i.length>1&&(0,a.jsxs)(d.$,{variant:"destructive",size:"sm",onClick:_,disabled:l,children:["\uD83E\uDDF9 Cleanup (",i.length," → 1)"]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:A,disabled:l,children:"Reconnect Meta"}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:N,disabled:l,children:"Refresh"})]}),m&&(0,a.jsx)("div",{className:"mb-2 p-2 bg-red-50 border border-red-200 rounded text-red-800 text-sm",children:m}),h&&(0,a.jsx)("div",{className:"mb-2 p-2 bg-green-50 border border-green-200 rounded text-green-800 text-sm",children:h}),l&&(0,a.jsxs)("div",{className:"mb-2 flex items-center text-gray-500",children:[(0,a.jsx)(u,{className:"h-4 w-4 animate-spin mr-2"})," Loading..."]}),(0,a.jsxs)("div",{className:"space-y-6",children:[0===s.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsxs)("div",{className:"text-gray-500 mb-4",children:[(0,a.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm",children:"No Meta account connected"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Connect your Facebook account to start posting"})]}),(0,a.jsxs)(d.$,{onClick:A,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,a.jsx)(g,{className:"h-4 w-4 mr-2"}),"Connect Meta Account"]})]}),s.map(e=>(0,a.jsxs)("div",{className:"border rounded p-4 mb-2 bg-gray-50",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(ID: ",e.id,")"]})]})}),(0,a.jsx)("div",{className:"ml-7 mt-2 space-y-2",children:e.instagram_accounts&&e.instagram_accounts.length>0?e.instagram_accounts.map(s=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 text-pink-500"}),(0,a.jsx)("span",{className:"text-gray-800",children:s.username}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(ID: ",s.id,")"]})]}),C(e.id,s.id)?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("span",{className:"text-sm text-green-600",children:"Connected"}),(0,a.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>w(e.id,s.id),disabled:l,children:"Disconnect"})]}):(0,a.jsx)(d.$,{size:"sm",onClick:()=>v(e.id,s.id),disabled:l,children:"Connect"})]},s.id)):(0,a.jsxs)("div",{className:"text-gray-500 text-sm flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1 text-yellow-500"}),"No Instagram business account linked to this page."]})})]},e.id))]})]})}var N=t(98626),v=t(50940),w=t(84027),k=t(44709),_=t(58869);let A=(0,h.A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var C=t(8819),D=t(11860),S=t(63143),P=t(85778),q=t(56085),M=t(9005);function z(){let[e,s]=(0,r.useState)(null),[t,n]=(0,r.useState)({generationCount:0,enhancementCredits:0}),[h,u]=(0,r.useState)(null),[g,y]=(0,r.useState)(!0),[b,j]=(0,r.useState)(!1),[z,$]=(0,r.useState)(null),[E,U]=(0,r.useState)(""),[F,I]=(0,r.useState)(""),[T,L]=(0,r.useState)(!1),[B,R]=(0,r.useState)(!1),O=(0,i.useRouter)();(0,i.useSearchParams)();let V=async()=>{try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)return void O.push("/login");let{data:t,error:a}=await c.ND.from("user_profiles").select("*").eq("user_id",e.id).single();if(a&&"PGRST116"!==a.code)throw a;if(t){let a={id:e.id,email:e.email||"",business_name:t.business_name||"",niche:t.industry||"",tone:t.brand_tone||"",audience:t.target_audience||"",city:t.city||"",state:t.state||"",country:t.country||"",created_at:t.created_at,updated_at:t.updated_at};s(a)}else{let t={id:e.id,email:e.email||"",business_name:"",niche:"",tone:"",audience:"",city:"",state:"",country:""};s(t)}}catch(e){console.error("Error loading profile:",e),U(e.message)}finally{y(!1)}},G=async()=>{try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)return;let{data:s,error:t}=await c.ND.from("user_profiles").select("post_generation_credits, image_enhancement_credits, subscription_plan").eq("user_id",e.id).single(),a=s?.subscription_plan||"free",r=H(a),i=Y(a);n({generationCount:s?.post_generation_credits??i,enhancementCredits:s?.image_enhancement_credits??r})}catch(e){console.error("Error loading usage stats:",e),n({generationCount:Y("free"),enhancementCredits:H("free")})}},H=e=>{switch(e){case"free":default:return 3;case"starter":return 30;case"growth":return 100;case"scale":return 500}},Y=e=>{switch(e){case"free":default:return 15;case"starter":return 100;case"growth":return 300;case"scale":return 1e3}},J=async()=>{try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)return;let{data:s,error:t}=await c.ND.from("user_profiles").select("subscription_plan, subscription_status, subscription_start_date, subscription_end_date, billing_cycle").eq("user_id",e.id).single();s?u({plan:s.subscription_plan||"free",status:s.subscription_status||"active",startDate:s.subscription_start_date,endDate:s.subscription_end_date,billingCycle:s.billing_cycle}):u({plan:"free",status:"active"})}catch(e){console.error("Error loading subscription plan:",e),u({plan:"free",status:"active"})}},K=async()=>{if(e){if([e.business_name,e.niche,e.city,e.country].filter(e=>!e||"string"!=typeof e||0===e.trim().length).length>0)return void U("Please fill in all required fields: Business Name, Industry/Niche, City, and Country");j(!0),U(""),I("");try{let{data:{user:s}}=await c.ND.auth.getUser();if(!s)throw Error("User not authenticated");console.log("Saving profile data:",{user_id:s.id,business_name:e.business_name,industry:e.niche,brand_tone:e.tone,target_audience:e.audience,city:e.city,state:e.state,country:e.country});let{data:t}=await c.ND.from("user_profiles").select("id").eq("user_id",s.id).single();if(t){let{error:t}=await c.ND.from("user_profiles").update({business_name:e.business_name,industry:e.niche,brand_tone:e.tone,target_audience:e.audience,city:e.city,state:e.state,country:e.country,updated_at:new Date().toISOString()}).eq("user_id",s.id);if(t)throw t}else{let{error:t}=await c.ND.from("user_profiles").insert({user_id:s.id,business_name:e.business_name,industry:e.niche,brand_tone:e.tone,target_audience:e.audience,city:e.city,state:e.state,country:e.country});if(t)throw t}I("Settings saved successfully!"),$(null)}catch(e){console.error("Error saving profile:",e),console.error("Error details:",{message:e.message,details:e.details,hint:e.hint,code:e.code}),U(e.message||"Failed to save profile. Please try again.")}finally{j(!1)}}},Q=async()=>{if(e){R(!0),U("");try{let s=await fetch("/api/subscriptions/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.id})}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed to cancel subscription");I(t.message||"Subscription cancelled successfully!"),L(!1),await J(),await G()}catch(e){U(e.message||"Failed to cancel subscription")}finally{R(!1)}}},W=(t,a)=>{e&&s({...e,[t]:a})},X=e=>{$(e)};return g?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(l(),{href:"/dashboard",children:(0,a.jsxs)(d.$,{variant:"ghost",size:"sm",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.A,{className:"h-6 w-6 text-gray-600 mr-2"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Settings"})]}),(0,a.jsx)(l(),{href:"/tutorial",children:(0,a.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Tutorial"]})})]})]})})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[E&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-800 text-sm",children:E})}),F&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-green-800 text-sm",children:F})}),e&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 text-gray-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Account Information"})]})}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900 text-lg font-semibold",children:e.email}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Email cannot be changed"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A,{className:"h-5 w-5 text-gray-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Business Profile"})]}),"business"===z?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.$,{size:"sm",onClick:K,loading:b,children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,a.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>{$(null),V()},children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):(0,a.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>X("business"),children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Fields marked with * are required to access the dashboard"}),(()=>{let s=[e?.business_name,e?.niche,e?.city,e?.country],t=s.filter(e=>e&&"string"==typeof e&&e.trim().length>0).length,r=s.length,i=t===r;return(0,a.jsxs)("div",{className:`mt-3 p-3 rounded-lg border ${i?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:`w-3 h-3 rounded-full mr-2 ${i?"bg-green-500":"bg-red-500"}`}),(0,a.jsx)("span",{className:`text-sm font-medium ${i?"text-green-800":"text-red-800"}`,children:i?"Profile Complete":"Profile Incomplete"})]}),(0,a.jsxs)("span",{className:`text-sm ${i?"text-green-600":"text-red-600"}`,children:[t,"/",r," required fields completed"]})]}),!i&&(0,a.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"Complete all required fields to access the dashboard"})]})})()]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-2 ${!e.business_name||0===e.business_name.trim().length?"text-red-600":"text-gray-700"}`,children:"Business Name *"}),"business"===z?(0,a.jsx)(o.p,{value:e.business_name,onChange:e=>W("business_name",e.target.value),placeholder:"Enter your business name",required:!0,className:e.business_name&&0!==e.business_name.trim().length?"":"border-red-500 focus:border-red-500"}):(0,a.jsx)("p",{className:`${!e.business_name||0===e.business_name.trim().length?"text-red-600":"text-gray-900"} text-lg font-semibold`,children:e.business_name||"Not set"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Required field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-2 ${!e.niche||0===e.niche.trim().length?"text-red-600":"text-gray-700"}`,children:"Industry/Niche *"}),"business"===z?(0,a.jsx)(o.p,{value:e.niche,onChange:e=>W("niche",e.target.value),placeholder:"e.g., Technology, Fashion, Food & Beverage",required:!0,className:e.niche&&0!==e.niche.trim().length?"":"border-red-500 focus:border-red-500"}):(0,a.jsx)("p",{className:`${!e.niche||0===e.niche.trim().length?"text-red-600":"text-gray-900"} text-lg font-semibold`,children:e.niche||"Not set"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Required field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Tone"}),"business"===z?(0,a.jsx)(o.p,{value:e.tone,onChange:e=>W("tone",e.target.value),placeholder:"e.g., Professional & Formal, Casual & Friendly"}):(0,a.jsx)("p",{className:"text-gray-900 text-lg font-semibold",children:e.tone||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Audience"}),"business"===z?(0,a.jsx)(o.p,{value:e.audience,onChange:e=>W("audience",e.target.value),placeholder:"e.g., Young professionals aged 25-35 interested in fitness"}):(0,a.jsx)("p",{className:"text-gray-900 text-lg font-semibold",children:e.audience||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-2 ${!e.city||0===e.city.trim().length?"text-red-600":"text-gray-700"}`,children:"City *"}),"business"===z?(0,a.jsx)(o.p,{value:e.city,onChange:e=>W("city",e.target.value),placeholder:"Enter your city",required:!0,className:e.city&&0!==e.city.trim().length?"":"border-red-500 focus:border-red-500"}):(0,a.jsx)("p",{className:`${!e.city||0===e.city.trim().length?"text-red-600":"text-gray-900"} text-lg font-semibold`,children:e.city||"Not set"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Required field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),"business"===z?(0,a.jsx)(x.Q,{value:e.state,onChange:e=>W("state",e),countryCode:(0,N.EA)(e.country)?.code||"",placeholder:"Select your state/province"}):(0,a.jsx)("p",{className:"text-gray-900 text-lg font-semibold",children:e.state||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-2 ${!e.country||0===e.country.trim().length?"text-red-600":"text-gray-700"}`,children:"Country *"}),"business"===z?(0,a.jsx)(m.b,{value:e.country,onChange:e=>W("country",e),placeholder:"Select your country",required:!0,className:e.country&&0!==e.country.trim().length?"":"border-red-500 focus:border-red-500"}):(0,a.jsx)("p",{className:`${!e.country||0===e.country.trim().length?"text-red-600":"text-gray-900"} text-lg font-semibold`,children:e.country||"Not set"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Required field"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(P.A,{className:"h-5 w-5 text-green-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Subscription Plan"})]}),h?.plan==="free"?(0,a.jsx)(d.$,{size:"sm",onClick:()=>O.push("/pricing"),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"Upgrade Plan"}):(0,a.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>O.push("/pricing"),children:"View Pricing"})]})}),(0,a.jsx)("div",{className:"p-6",children:h?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:`w-3 h-3 rounded-full mr-3 ${"active"===h.status?"bg-green-500":"cancelled"===h.status?"bg-red-500":"bg-yellow-500"}`}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:[h.plan&&h.plan.length>20?"Premium":h.plan," Plan"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 capitalize",children:["Status: ",h.status]}),h.billingCycle&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 capitalize",children:["Billing: ",h.billingCycle]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:["free"===h.plan?(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"₹0"}):"starter"===h.plan?(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"₹999"}):"growth"===h.plan?(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"₹2,499"}):"scale"===h.plan?(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"₹8,999"}):(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"-"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"per month"})]})]}),"free"===h.plan&&(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(q.A,{className:"h-5 w-5 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Upgrade to unlock more features!"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,a.jsx)("li",{children:"More AI content generations"}),(0,a.jsx)("li",{children:"Downloadable AI image enhancements"}),(0,a.jsx)("li",{children:"Unlimited media storage"}),(0,a.jsx)("li",{children:"Priority support"})]})}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(d.$,{onClick:()=>O.push("/pricing"),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"View Plans & Upgrade"})})]})]})}),h.startDate&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Started"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(h.startDate).toLocaleDateString()})]}),h.endDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expires"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(h.endDate).toLocaleDateString()})]})]}),h&&"free"!==h.plan&&"active"===h.status&&(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Change Plan"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"View all available plans and upgrade or downgrade"})]}),(0,a.jsx)(d.$,{size:"sm",onClick:()=>O.push("/pricing"),className:"bg-blue-600 hover:bg-blue-700",children:"View Plans"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Cancel Subscription"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"You can cancel your subscription at any time"})]}),(0,a.jsx)(d.$,{variant:"destructive",size:"sm",onClick:()=>L(!0),className:"bg-red-600 hover:bg-red-700",children:"Cancel Plan"})]})]})})]}):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Loading subscription information..."})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(P.A,{className:"h-5 w-5 text-purple-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Usage Statistics"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4 border border-purple-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-purple-700",children:"Post Generation Credits"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:t.generationCount}),(0,a.jsx)("p",{className:"text-xs text-purple-600",children:"AI post generations remaining"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(q.A,{className:"h-6 w-6 text-purple-600"})})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-orange-700",children:"Enhancement Credits"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:t.enhancementCredits}),(0,a.jsx)("p",{className:"text-xs text-orange-600",children:"AI image enhancements remaining"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(M.A,{className:"h-6 w-6 text-orange-600"})})]})})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"})," Enhancement credits are used when you enhance images with AI. You can purchase more credits or upgrade your plan to get additional credits."]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-blue-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Social Media Connections"})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(f,{})})]}),e.created_at&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 text-gray-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Information"})]})}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Created"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(e.created_at).toLocaleDateString()})]}),e.updated_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(e.updated_at).toLocaleDateString()})]})]})})]})]})]}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-8 flex justify-end",children:(0,a.jsx)(d.$,{variant:"destructive",onClick:async()=>{await c.ND.auth.signOut(),O.push("/login")},className:"mt-8",children:"Log Out"})}),T&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)(D.A,{className:"w-5 h-5 text-red-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Cancel Subscription"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to cancel your subscription? This action cannot be undone."}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"What happens when you cancel:"}),(0,a.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,a.jsx)("li",{children:"• Your subscription will be cancelled immediately"}),(0,a.jsx)("li",{children:"• You'll be downgraded to the Free plan"}),(0,a.jsx)("li",{children:"• Your credits will be reset to Free plan limits"}),(0,a.jsx)("li",{children:"• You can resubscribe anytime"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>L(!1),className:"flex-1",disabled:B,children:"Keep Subscription"}),(0,a.jsx)(d.$,{variant:"destructive",onClick:Q,loading:B,className:"flex-1 bg-red-600 hover:bg-red-700",children:B?"Cancelling...":"Yes, Cancel"})]})]})})]})}function $(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}),children:(0,a.jsx)(z,{})})}},11860:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19526:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37437:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d});var a=t(65239),r=t(48088),i=t(88170),n=t.n(i),l=t(30893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d={children:["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,98245)),"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/settings/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/settings/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44709:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},50940:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56085:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},58869:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},66232:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},69580:(e,s,t)=>{Promise.resolve().then(t.bind(t,11312))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82732:(e,s,t)=>{Promise.resolve().then(t.bind(t,98245))},84027:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},85778:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},91645:e=>{"use strict";e.exports=require("net")},93613:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},94735:e=>{"use strict";e.exports=require("events")},98245:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/settings/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/thanveerulaklam/Desktop/Projects/Somema/somema-ai/app/settings/page.tsx","default")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4447,3078,1658,9522,9069,5814,6100,1038],()=>t(37437));module.exports=a})();