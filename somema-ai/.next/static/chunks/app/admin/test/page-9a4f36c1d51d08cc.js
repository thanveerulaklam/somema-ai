(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{646:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1574:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var t=r(5155),i=r(2115),l=r(3168),n=r(646),a=r(4861);function d(){let[e,s]=(0,i.useState)(null),[r,d]=(0,i.useState)(null),[c,o]=(0,i.useState)(null),[m,u]=(0,i.useState)(null),[h,x]=(0,i.useState)(!0);(0,i.useEffect)(()=>{N()},[]);let N=async()=>{try{x(!0);let{data:{user:e}}=await l.ND.auth.getUser();if(!e){o(!1),x(!1);return}s(e);let{data:r,error:t}=await l.ND.from("user_profiles").select("*").eq("user_id",e.id).single();if(t||!r){o(!1),x(!1);return}d(r);let i=!1;if(e)try{let{data:s,error:r}=await l.ND.rpc("get_user_admin_info",{user_uuid:e.id});!r&&s&&(i=s.is_admin,u(s))}catch(e){console.error("Error checking admin access:",e)}o(i)}catch(e){console.error("Admin access check failed:",e),o(!1)}finally{x(!1)}};return h?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Checking admin access..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Admin Access Test"}),(0,t.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"User Information"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"User ID:"})," ",(null==e?void 0:e.id)||"Not found"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",(null==e?void 0:e.email)||"Not found"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Business Name:"})," ",(null==r?void 0:r.business_name)||"Not set"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"Industry:"})," ",(null==r?void 0:r.industry)||"Not set"]})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Admin Access Status"}),c?(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,t.jsx)(n.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"✅ ADMIN ACCESS GRANTED"})]}):(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-red-600",children:[(0,t.jsx)(a.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:"❌ ADMIN ACCESS DENIED"})]})]}),(0,t.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-yellow-800 mb-3",children:"Admin Access Requirements"}),(0,t.jsxs)("div",{className:"text-sm text-yellow-700 space-y-2",children:[(0,t.jsx)("div",{children:"• You need to be granted admin privileges by a super admin"}),(0,t.jsxs)("div",{children:["• Your user ID: ",(0,t.jsx)("strong",{children:(null==e?void 0:e.id)||"Not found"})]}),(0,t.jsx)("div",{children:"• Contact your system administrator to get admin access"})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:c?(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"✅ You're All Set!"}),(0,t.jsxs)("div",{className:"text-sm text-green-700 space-y-2",children:[(0,t.jsxs)("div",{children:["• You can now access ",(0,t.jsx)("strong",{children:"/admin"})]}),(0,t.jsxs)("div",{children:["• You can manage users at ",(0,t.jsx)("strong",{children:"/admin/users"})]}),(0,t.jsx)("div",{children:"• All admin features are available"})]}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)("a",{href:"/admin",className:"inline-block bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"Go to Admin Dashboard"})})]}):(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"To Get Admin Access:"}),(0,t.jsxs)("div",{className:"text-sm text-blue-700 space-y-2",children:[(0,t.jsxs)("div",{children:["1. Your user ID is: ",(0,t.jsx)("strong",{children:(null==e?void 0:e.id)||"Not found"})]}),(0,t.jsx)("div",{children:"2. A super admin needs to run this SQL command:"}),(0,t.jsxs)("div",{className:"bg-gray-100 p-2 rounded font-mono text-xs",children:["INSERT INTO admin_roles (user_id, role, permissions, granted_by) VALUES ('",(null==e?void 0:e.id)||"YOUR_USER_ID","', 'admin', '",{users:["read"],analytics:["read"]},"', '7c12a35b-353c-43ff-808b-f1c574df69e0');"]}),(0,t.jsx)("div",{children:"3. After that, refresh this page"})]})]})}),(0,t.jsxs)("details",{className:"mt-6",children:[(0,t.jsx)("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"Debug Information"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-100 rounded text-xs font-mono",children:(0,t.jsx)("pre",{children:JSON.stringify({user:e?{id:e.id,email:e.email}:null,profile:r?{business_name:r.business_name,industry:r.industry}:null,adminAccess:c,adminInfo:m},null,2)})})]})]})})})}},3168:(e,s,r)=>{"use strict";r.d(s,{$G:()=>i,ND:()=>t});let t=(0,r(3865).createBrowserClient)("https://yfmypikqgegvookjzvyv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbXlwaWtxZ2Vndm9va2p6dnl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTU3NDMsImV4cCI6MjA2NjMzMTc0M30.BX62nqWwNu23pRQYrzoR9EetesEkac3ZdAu2KKXwNxs",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"quely-ai-web"}}}),i=()=>"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbXlwaWtxZ2Vndm9va2p6dnl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTU3NDMsImV4cCI6MjA2NjMzMTc0M30.BX62nqWwNu23pRQYrzoR9EetesEkac3ZdAu2KKXwNxs"},4861:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(9946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8305:(e,s,r)=>{Promise.resolve().then(r.bind(r,1574))},9946:(e,s,r)=>{"use strict";r.d(s,{A:()=>m});var t=r(2115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),n=e=>{let s=l(e);return s.charAt(0).toUpperCase()+s.slice(1)},a=function(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return s.filter((e,s,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===s).join(" ").trim()},d=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)((e,s)=>{let{color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:o="",children:m,iconNode:u,...h}=e;return(0,t.createElement)("svg",{ref:s,...c,width:i,height:i,stroke:r,strokeWidth:n?24*Number(l)/Number(i):l,className:a("lucide",o),...!m&&!d(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[s,r]=e;return(0,t.createElement)(s,r)}),...Array.isArray(m)?m:[m]])}),m=(e,s)=>{let r=(0,t.forwardRef)((r,l)=>{let{className:d,...c}=r;return(0,t.createElement)(o,{ref:l,iconNode:s,className:a("lucide-".concat(i(n(e))),"lucide-".concat(e),d),...c})});return r.displayName=n(e),r}}},e=>{var s=s=>e(e.s=s);e.O(0,[3865,8441,1684,7358],()=>s(8305)),_N_E=e.O()}]);