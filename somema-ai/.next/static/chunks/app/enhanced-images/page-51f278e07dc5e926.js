(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1033],{1788:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(9946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2657:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3168:(e,a,r)=>{"use strict";r.d(a,{$G:()=>t,ND:()=>s});let s=(0,r(3865).createBrowserClient)("https://yfmypikqgegvookjzvyv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbXlwaWtxZ2Vndm9va2p6dnl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTU3NDMsImV4cCI6MjA2NjMzMTc0M30.BX62nqWwNu23pRQYrzoR9EetesEkac3ZdAu2KKXwNxs",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"quely-ai-web"}}}),t=()=>"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmbXlwaWtxZ2Vndm9va2p6dnl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NTU3NDMsImV4cCI6MjA2NjMzMTc0M30.BX62nqWwNu23pRQYrzoR9EetesEkac3ZdAu2KKXwNxs"},3311:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(9946).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},3515:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>p});var s=r(5155),t=r(2115),l=r(5695),i=r(3168),n=r(4912),c=r(6076),o=r(7550),d=r(3311),m=r(7213),h=r(2657),u=r(7924);let g=(0,r(9946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var x=r(1788);function p(){let[e,a]=(0,t.useState)([]),[r,p]=(0,t.useState)(!0),[f,b]=(0,t.useState)(""),[w,v]=(0,t.useState)("grid"),[y,j]=(0,t.useState)(""),[N,_]=(0,t.useState)(""),[k,A]=(0,t.useState)("free"),C=(0,l.useRouter)();(0,t.useEffect)(()=>{I()},[]);let I=async()=>{try{console.log("\uD83D\uDD0D Loading AI enhanced images...");let{data:{user:e}}=await i.ND.auth.getUser();if(!e)return void C.push("/login");console.log("\uD83D\uDC64 Loading enhanced images for user:",e.id);let{data:r,error:s}=await i.ND.from("user_profiles").select("subscription_plan").eq("user_id",e.id).single();if(s)console.error("Error fetching user profile:",s),A("free");else{let e=(null==r?void 0:r.subscription_plan)||"free";console.log("\uD83D\uDCCB User plan loaded:",e),A(e)}let{data:t,error:l}=await i.ND.from("posts").select("*").eq("user_id",e.id).not("enhanced_image_url","is",null).not("enhanced_image_url","eq","").order("created_at",{ascending:!1});if(l)throw l;console.log("\uD83D\uDCCA Enhanced images loaded:",(null==t?void 0:t.length)||0,"items"),console.log("\uD83D\uDCCB Raw data:",t);let n=(t||[]).map(e=>(console.log("Processing post:",e.id,"enhanced_image_url:",e.enhanced_image_url),{id:e.id,original_image_url:e.media_url||"",enhanced_image_url:e.enhanced_image_url,created_at:e.created_at,user_id:e.user_id,file_name:e.caption?"Enhanced_".concat(e.caption.substring(0,30),"..."):"Enhanced_".concat(e.id)}));a(n)}catch(e){console.error("❌ Error loading enhanced images:",e),_(e.message)}finally{p(!1)}},E=e.filter(e=>{var a;let r=(null==(a=e.file_name)?void 0:a.toLowerCase().includes(f.toLowerCase()))||e.enhanced_image_url.toLowerCase().includes(f.toLowerCase()),s=!y||new Date(e.created_at).toDateString()===new Date(y).toDateString();return r&&s}),z=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),L=e=>{window.open(e.enhanced_image_url,"_blank")},M=async(e,a)=>{if("free"===k)return void C.push("/pricing");try{let r=await fetch(e),s=await r.blob(),t=window.URL.createObjectURL(s),l=document.createElement("a");l.href=t,l.download=a,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t),document.body.removeChild(l)}catch(e){console.error("Download failed:",e),_("Failed to download image")}};return r?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6 sm:mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:()=>C.push("/dashboard"),className:"flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),"Back to Dashboard"]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(d.A,{className:"h-5 w-5 text-purple-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"AI Enhanced Images"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Your AI-enhanced promotional images"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.$,{variant:"grid"===w?"primary":"outline",size:"sm",onClick:()=>v("grid"),children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsx)(n.$,{variant:"list"===w?"primary":"outline",size:"sm",onClick:()=>v("list"),children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4 mb-6 sm:mb-8",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(c.p,{type:"text",placeholder:"Search enhanced images...",value:f,onChange:e=>b(e.target.value),className:"pl-10"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)(c.p,{type:"date",value:y,onChange:e=>j(e.target.value),className:"w-auto"}),y&&(0,s.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>j(""),children:"Clear"})]})]})}),N&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,s.jsx)("p",{className:"text-red-600",children:N})}),0===E.length?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[(0,s.jsx)(d.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No enhanced images found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:f||y?"Try adjusting your search or filter criteria.":"Start by enhancing some images in the post editor to see them here."}),(0,s.jsx)(n.$,{variant:"primary",onClick:()=>C.push("/posts/editor"),children:"Create Enhanced Image"})]}):(0,s.jsx)("div",{className:"grid"===w?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:E.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden hover:shadow-md transition-shadow ".concat("list"===w?"flex items-center p-4":""),children:"grid"===w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative aspect-square",children:[(0,s.jsx)("img",{src:e.enhanced_image_url,alt:"Enhanced image",className:"w-full h-full object-cover",onError:a=>{a.target.src=e.original_image_url}}),(0,s.jsx)("div",{className:"absolute top-2 right-2",children:(0,s.jsxs)("div",{className:"bg-purple-600 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[(0,s.jsx)(d.A,{className:"h-3 w-3"}),"AI Enhanced"]})})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:e.file_name}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mb-3",children:z(e.created_at)}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>M(e.enhanced_image_url,e.file_name||"enhanced-image"),className:"flex-1",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"free"===k?"Upgrade to Download":"Download"]}),(0,s.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>L(e),disabled:"free"===k,title:"free"===k?"Upgrade to view full image":"View full image",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative w-20 h-20 flex-shrink-0",children:[(0,s.jsx)("img",{src:e.enhanced_image_url,alt:"Enhanced image",className:"w-full h-full object-cover rounded-lg",onError:a=>{a.target.src=e.original_image_url}}),(0,s.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,s.jsx)("div",{className:"bg-purple-600 text-white text-xs px-1 py-0.5 rounded-full",children:(0,s.jsx)(d.A,{className:"h-2 w-2"})})})]}),(0,s.jsxs)("div",{className:"flex-1 ml-4",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:e.file_name}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mb-2",children:z(e.created_at)})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>M(e.enhanced_image_url,e.file_name||"enhanced-image"),children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"free"===k?"Upgrade to Download":"Download"]}),(0,s.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>L(e),disabled:"free"===k,title:"free"===k?"Upgrade to view full image":"View full image",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})]})]})},e.id))}),E.length>0&&(0,s.jsx)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:["Showing ",E.length," of ",e.length," enhanced images"]}),(0,s.jsx)("span",{children:f||y?"Filtered results":"All enhanced images"})]})})]})})}},3999:(e,a,r)=>{"use strict";r.d(a,{cn:()=>l});var s=r(2596),t=r(9688);function l(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,t.QP)((0,s.$)(a))}async function i(e){try{console.log("\uD83D\uDD04 Trying fallback HEIC conversion...");let a=await fetch(e),r=await a.blob(),s=document.createElement("canvas"),t=s.getContext("2d");if(!t)throw Error("Canvas context not available");let l=new Image;return new Promise((e,a)=>{l.onload=()=>{try{s.width=l.width,s.height=l.height,t.drawImage(l,0,0);let a=s.toDataURL("image/jpeg",.9);console.log("✅ Fallback HEIC conversion successful"),e(a)}catch(e){console.error("❌ Fallback conversion failed:",e),a(e)}},l.onerror=()=>{console.error("❌ Failed to load image for fallback conversion"),a(Error("Failed to load image"))},l.src=URL.createObjectURL(r)})}catch(e){throw console.error("❌ Fallback HEIC conversion failed:",e),e}}},4716:(e,a,r)=>{Promise.resolve().then(r.bind(r,3515))},4912:(e,a,r)=>{"use strict";r.d(a,{$:()=>i});var s=r(5155),t=r(2115),l=r(3999);let i=t.forwardRef((e,a)=>{let{className:r,variant:t="primary",size:i="md",loading:n=!1,children:c,disabled:o,...d}=e;return(0,s.jsxs)("button",{className:(0,l.cn)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-blue-600 text-white hover:bg-blue-700 border border-blue-600",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 border border-gray-200",outline:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-50",ghost:"text-gray-900 hover:bg-gray-100",destructive:"bg-red-600 text-white hover:bg-red-700 border border-red-600"}[t],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-6 text-lg"}[i],r),ref:a,disabled:o||n,...d,children:[n&&(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})});i.displayName="Button"},5695:(e,a,r)=>{"use strict";var s=r(8999);r.o(s,"usePathname")&&r.d(a,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(a,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(a,{useSearchParams:function(){return s.useSearchParams}})},6076:(e,a,r)=>{"use strict";r.d(a,{p:()=>i});var s=r(5155),t=r(2115),l=r(3999);let i=t.forwardRef((e,a)=>{let{className:r,type:i,label:n,error:c,helperText:o,id:d,...m}=e,h=(0,t.useId)(),u=d||"input-".concat(h);return(0,s.jsxs)("div",{className:"w-full",children:[n&&(0,s.jsx)("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:n}),(0,s.jsx)("input",{type:i,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c&&"border-red-500 focus-visible:ring-red-500",r),ref:a,id:u,...m}),c&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c}),o&&!c&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o})]})});i.displayName="Input"},7213:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(9946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7550:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7924:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9946:(e,a,r)=>{"use strict";r.d(a,{A:()=>m});var s=r(2115);let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase()),i=e=>{let a=l(e);return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()},c=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,a)=>{let{color:r="currentColor",size:t=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:m,iconNode:h,...u}=e;return(0,s.createElement)("svg",{ref:a,...o,width:t,height:t,stroke:r,strokeWidth:i?24*Number(l)/Number(t):l,className:n("lucide",d),...!m&&!c(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[a,r]=e;return(0,s.createElement)(a,r)}),...Array.isArray(m)?m:[m]])}),m=(e,a)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:c,...o}=r;return(0,s.createElement)(d,{ref:l,iconNode:a,className:n("lucide-".concat(t(i(e))),"lucide-".concat(e),c),...o})});return r.displayName=i(e),r}}},e=>{var a=a=>e(e.s=a);e.O(0,[3865,4277,8441,1684,7358],()=>a(4716)),_N_E=e.O()}]);