(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4662],{381:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},488:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},646:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1007:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1586:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},3076:(e,s,t)=>{Promise.resolve().then(t.bind(t,4385))},3311:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},3717:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4229:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4385:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var a=t(5155),r=t(2115),i=t(5695),n=t(6874),l=t.n(n),c=t(3168),d=t(4912),o=t(6076),m=t(666),h=t(5794),x=t(9946);let u=(0,x.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var g=t(488);let p=(0,x.A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var y=t(5684),b=t(646),j=t(5339);function f(e){let{onConnected:s}=e,[t,i]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[o,m]=(0,r.useState)(!1),[h,x]=(0,r.useState)(""),[f,N]=(0,r.useState)("");(0,r.useEffect)(()=>{v()},[]);let v=async()=>{m(!0),x("");try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)return;let s=await fetch("/api/meta/connect",{headers:{Authorization:"Bearer ".concat(e.id)}});if(!s.ok){let e=await s.json();if("Meta account not connected"===e.error){i([]),l([]);return}throw Error(e.error||"Failed to fetch Meta connections")}let t=await s.json();i(t.available||[]),l(t.connected||[])}catch(e){console.error("Error fetching Meta connections:",e),x(e.message||"Failed to fetch Meta connections")}finally{m(!1)}},w=async(e,s)=>{m(!0),x(""),N("");try{let{data:{user:t}}=await c.ND.auth.getUser();if(!t)throw Error("User not authenticated");let a=await fetch("/api/meta/connect",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.id)},body:JSON.stringify({pageId:e,instagramId:s})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to connect")}let r=await a.json();l(r.connected||[]),N("Connected successfully! Previous connections have been disconnected."),setTimeout(()=>v(),500)}catch(e){x(e.message||"Failed to connect")}finally{m(!1)}},k=async(e,s)=>{m(!0),x(""),N("");try{let{data:{user:t}}=await c.ND.auth.getUser();if(!t)throw Error("User not authenticated");let a=await fetch("/api/meta/connect",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.id)},body:JSON.stringify({pageId:e,instagramId:s})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to disconnect")}N("Disconnected successfully!"),v()}catch(e){x(e.message||"Failed to disconnect")}finally{m(!1)}},_=async()=>{if(window.confirm("Are you sure you want to disconnect all accounts?")){m(!0),x(""),N("");try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)throw Error("User not authenticated");let{error:s}=await c.ND.from("user_profiles").update({meta_credentials:{}}).eq("user_id",e.id);if(s)throw s;l([]),N("All accounts disconnected!"),v()}catch(e){x(e.message||"Failed to disconnect all")}finally{m(!1)}}},A=async()=>{m(!0),x(""),N("");try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)throw Error("User not authenticated");let s=await fetch("/api/meta/connect",{method:"PATCH",headers:{Authorization:"Bearer ".concat(e.id)}});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to cleanup connections")}let t=await s.json();N(t.message||"Connections cleaned up successfully!"),v()}catch(e){x(e.message||"Failed to cleanup connections")}finally{m(!1)}},C=()=>{window.location.href="/api/meta/oauth"},S=(e,s)=>n.some(t=>t.pageId===e&&t.instagramId===s);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:_,disabled:o||0===n.length,children:"Disconnect All"}),n.length>1&&(0,a.jsxs)(d.$,{variant:"destructive",size:"sm",onClick:A,disabled:o,children:["\uD83E\uDDF9 Cleanup (",n.length," â†’ 1)"]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:C,disabled:o,children:"Reconnect Meta"}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:v,disabled:o,children:"Refresh"})]}),h&&(0,a.jsx)("div",{className:"mb-2 p-2 bg-red-50 border border-red-200 rounded text-red-800 text-sm",children:h}),f&&(0,a.jsx)("div",{className:"mb-2 p-2 bg-green-50 border border-green-200 rounded text-green-800 text-sm",children:f}),o&&(0,a.jsxs)("div",{className:"mb-2 flex items-center text-gray-500",children:[(0,a.jsx)(u,{className:"h-4 w-4 animate-spin mr-2"})," Loading..."]}),(0,a.jsxs)("div",{className:"space-y-6",children:[0===t.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsxs)("div",{className:"text-gray-500 mb-4",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{className:"text-sm",children:"No Meta account connected"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Connect your Facebook account to start posting"})]}),(0,a.jsxs)(d.$,{onClick:C,disabled:o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,a.jsx)(p,{className:"h-4 w-4 mr-2"}),"Connect Meta Account"]})]}),t.map(e=>(0,a.jsxs)("div",{className:"border rounded p-4 mb-2 bg-gray-50",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(ID: ",e.id,")"]})]})}),(0,a.jsx)("div",{className:"ml-7 mt-2 space-y-2",children:e.instagram_accounts&&e.instagram_accounts.length>0?e.instagram_accounts.map(s=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 text-pink-500"}),(0,a.jsx)("span",{className:"text-gray-800",children:s.username}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(ID: ",s.id,")"]})]}),S(e.id,s.id)?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("span",{className:"text-sm text-green-600",children:"Connected"}),(0,a.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>k(e.id,s.id),disabled:o,children:"Disconnect"})]}):(0,a.jsx)(d.$,{size:"sm",onClick:()=>w(e.id,s.id),disabled:o,children:"Connect"})]},s.id)):(0,a.jsxs)("div",{className:"text-gray-500 text-sm flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1 text-yellow-500"}),"No Instagram business account linked to this page."]})})]},e.id))]})]})}var N=t(3300),v=t(7550),w=t(381),k=t(9947),_=t(1007);let A=(0,x.A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);var C=t(4229),S=t(4416),D=t(3717),M=t(1586),z=t(3311),E=t(7213);function F(){var e;let[s,t]=(0,r.useState)(null),[n,x]=(0,r.useState)({generationCount:0,enhancementCredits:0}),[u,p]=(0,r.useState)(null),[y,b]=(0,r.useState)(!0),[j,F]=(0,r.useState)(!1),[q,P]=(0,r.useState)(null),[U,I]=(0,r.useState)(""),[T,$]=(0,r.useState)(""),[L,O]=(0,r.useState)(!1),[R,B]=(0,r.useState)(!1),Y=(0,i.useRouter)(),V=(0,i.useSearchParams)();(0,r.useEffect)(()=>{J(),G(),W(),H();let e=V.get("message");if(e){$(decodeURIComponent(e));let s=new URL(window.location.href);s.searchParams.delete("message"),window.history.replaceState({},"",s.toString()),(e.includes("Subscription activated")||e.includes("Top-up credits added"))&&(W(),G())}},[V]);let H=async()=>{let e=new URLSearchParams(window.location.search),s=e.get("meta_connected"),t=e.get("error"),a=e.get("data");if("true"===s&&a)try{let e=JSON.parse(decodeURIComponent(a));console.log("Meta OAuth successful:",e);let{data:{user:s}}=await c.ND.auth.getUser();if(s){let{data:t}=await c.ND.from("user_profiles").select("id").eq("user_id",s.id).single();if(t){var r;let{data:t}=await c.ND.from("user_profiles").select("meta_credentials").eq("user_id",s.id).single(),a=(null==t||null==(r=t.meta_credentials)?void 0:r.connected)||[],{error:i}=await c.ND.from("user_profiles").update({meta_credentials:{accessToken:e.accessToken,pages:e.pages,connected:a}}).eq("user_id",s.id);i?(console.error("Error updating Meta credentials:",i),I("Failed to save Facebook connection")):$("Facebook pages discovered! You can now connect individual Instagram accounts.")}else{let{error:t}=await c.ND.from("user_profiles").insert({user_id:s.id,meta_credentials:{accessToken:e.accessToken,pages:e.pages,connected:[]}});t?(console.error("Error creating user profile:",t),I("Failed to save Facebook connection")):$("Facebook pages discovered! You can now connect individual Instagram accounts.")}}window.history.replaceState({},document.title,window.location.pathname)}catch(e){console.error("Error parsing Meta data:",e),I("Failed to process Facebook connection")}else"true"===s?($("Facebook pages discovered! You can now connect individual Instagram accounts."),window.history.replaceState({},document.title,window.location.pathname)):t&&(console.error("Meta OAuth error:",t),I("Facebook connection failed: ".concat(t)),window.history.replaceState({},document.title,window.location.pathname))},J=async()=>{try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)return void Y.push("/login");let{data:s,error:a}=await c.ND.from("user_profiles").select("*").eq("user_id",e.id).single();if(a&&"PGRST116"!==a.code)throw a;if(s){let a={id:e.id,email:e.email||"",business_name:s.business_name||"",niche:s.industry||"",tone:s.brand_tone||"",audience:s.target_audience||"",city:s.city||"",state:s.state||"",country:s.country||"",created_at:s.created_at,updated_at:s.updated_at};t(a)}else{let s={id:e.id,email:e.email||"",business_name:"",niche:"",tone:"",audience:"",city:"",state:"",country:""};t(s)}}catch(e){console.error("Error loading profile:",e),I(e.message)}finally{b(!1)}},G=async()=>{try{var e,s;let{data:{user:t}}=await c.ND.auth.getUser();if(!t)return;let{data:a,error:r}=await c.ND.from("user_profiles").select("post_generation_credits, image_enhancement_credits, subscription_plan").eq("user_id",t.id).single(),i=(null==a?void 0:a.subscription_plan)||"free",n=K(i),l=Q(i);x({generationCount:null!=(e=null==a?void 0:a.post_generation_credits)?e:l,enhancementCredits:null!=(s=null==a?void 0:a.image_enhancement_credits)?s:n})}catch(e){console.error("Error loading usage stats:",e),x({generationCount:Q("free"),enhancementCredits:K("free")})}},K=e=>{switch(e){case"free":default:return 3;case"starter":return 30;case"growth":return 100;case"scale":return 500}},Q=e=>{switch(e){case"free":default:return 15;case"starter":return 100;case"growth":return 300;case"scale":return 1e3}},W=async()=>{try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)return;let{data:s,error:t}=await c.ND.from("user_profiles").select("subscription_plan, subscription_status, subscription_start_date, subscription_end_date, billing_cycle").eq("user_id",e.id).single();s?p({plan:s.subscription_plan||"free",status:s.subscription_status||"active",startDate:s.subscription_start_date,endDate:s.subscription_end_date,billingCycle:s.billing_cycle}):p({plan:"free",status:"active"})}catch(e){console.error("Error loading subscription plan:",e),p({plan:"free",status:"active"})}},X=async()=>{if(s){if([s.business_name,s.niche,s.city,s.country].filter(e=>!e||"string"!=typeof e||0===e.trim().length).length>0)return void I("Please fill in all required fields: Business Name, Industry/Niche, City, and Country");F(!0),I(""),$("");try{let{data:{user:e}}=await c.ND.auth.getUser();if(!e)throw Error("User not authenticated");console.log("Saving profile data:",{user_id:e.id,business_name:s.business_name,industry:s.niche,brand_tone:s.tone,target_audience:s.audience,city:s.city,state:s.state,country:s.country});let{data:t}=await c.ND.from("user_profiles").select("id").eq("user_id",e.id).single();if(t){let{error:t}=await c.ND.from("user_profiles").update({business_name:s.business_name,industry:s.niche,brand_tone:s.tone,target_audience:s.audience,city:s.city,state:s.state,country:s.country,updated_at:new Date().toISOString()}).eq("user_id",e.id);if(t)throw t}else{let{error:t}=await c.ND.from("user_profiles").insert({user_id:e.id,business_name:s.business_name,industry:s.niche,brand_tone:s.tone,target_audience:s.audience,city:s.city,state:s.state,country:s.country});if(t)throw t}$("Settings saved successfully!"),P(null)}catch(e){console.error("Error saving profile:",e),console.error("Error details:",{message:e.message,details:e.details,hint:e.hint,code:e.code}),I(e.message||"Failed to save profile. Please try again.")}finally{F(!1)}}},Z=async()=>{if(s){B(!0),I("");try{let e=await fetch("/api/subscriptions/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to cancel subscription");$(t.message||"Subscription cancelled successfully!"),O(!1),await W(),await G()}catch(e){I(e.message||"Failed to cancel subscription")}finally{B(!1)}}},ee=(e,a)=>{s&&t({...s,[e]:a})},es=e=>{P(e)};return y?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(l(),{href:"/dashboard",children:(0,a.jsxs)(d.$,{variant:"ghost",size:"sm",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.A,{className:"h-6 w-6 text-gray-600 mr-2"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Settings"})]}),(0,a.jsx)(l(),{href:"/tutorial",children:(0,a.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Tutorial"]})})]})]})})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[U&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-800 text-sm",children:U})}),T&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-green-800 text-sm",children:T})}),s&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 text-gray-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Account Information"})]})}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900 text-lg font-semibold",children:s.email}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Email cannot be changed"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A,{className:"h-5 w-5 text-gray-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Business Profile"})]}),"business"===q?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d.$,{size:"sm",onClick:X,loading:j,children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,a.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>{P(null),J()},children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):(0,a.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>es("business"),children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Fields marked with * are required to access the dashboard"}),(()=>{let e=[null==s?void 0:s.business_name,null==s?void 0:s.niche,null==s?void 0:s.city,null==s?void 0:s.country],t=e.filter(e=>e&&"string"==typeof e&&e.trim().length>0).length,r=e.length,i=t===r;return(0,a.jsxs)("div",{className:"mt-3 p-3 rounded-lg border ".concat(i?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat(i?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(i?"text-green-800":"text-red-800"),children:i?"Profile Complete":"Profile Incomplete"})]}),(0,a.jsxs)("span",{className:"text-sm ".concat(i?"text-green-600":"text-red-600"),children:[t,"/",r," required fields completed"]})]}),!i&&(0,a.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"Complete all required fields to access the dashboard"})]})})()]})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(s.business_name&&0!==s.business_name.trim().length?"text-gray-700":"text-red-600"),children:"Business Name *"}),"business"===q?(0,a.jsx)(o.p,{value:s.business_name,onChange:e=>ee("business_name",e.target.value),placeholder:"Enter your business name",required:!0,className:s.business_name&&0!==s.business_name.trim().length?"":"border-red-500 focus:border-red-500"}):(0,a.jsx)("p",{className:"".concat(s.business_name&&0!==s.business_name.trim().length?"text-gray-900":"text-red-600"," text-lg font-semibold"),children:s.business_name||"Not set"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Required field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(s.niche&&0!==s.niche.trim().length?"text-gray-700":"text-red-600"),children:"Industry/Niche *"}),"business"===q?(0,a.jsx)(o.p,{value:s.niche,onChange:e=>ee("niche",e.target.value),placeholder:"e.g., Technology, Fashion, Food & Beverage",required:!0,className:s.niche&&0!==s.niche.trim().length?"":"border-red-500 focus:border-red-500"}):(0,a.jsx)("p",{className:"".concat(s.niche&&0!==s.niche.trim().length?"text-gray-900":"text-red-600"," text-lg font-semibold"),children:s.niche||"Not set"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Required field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Tone"}),"business"===q?(0,a.jsx)(o.p,{value:s.tone,onChange:e=>ee("tone",e.target.value),placeholder:"e.g., Professional & Formal, Casual & Friendly"}):(0,a.jsx)("p",{className:"text-gray-900 text-lg font-semibold",children:s.tone||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Audience"}),"business"===q?(0,a.jsx)(o.p,{value:s.audience,onChange:e=>ee("audience",e.target.value),placeholder:"e.g., Young professionals aged 25-35 interested in fitness"}):(0,a.jsx)("p",{className:"text-gray-900 text-lg font-semibold",children:s.audience||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(s.city&&0!==s.city.trim().length?"text-gray-700":"text-red-600"),children:"City *"}),"business"===q?(0,a.jsx)(o.p,{value:s.city,onChange:e=>ee("city",e.target.value),placeholder:"Enter your city",required:!0,className:s.city&&0!==s.city.trim().length?"":"border-red-500 focus:border-red-500"}):(0,a.jsx)("p",{className:"".concat(s.city&&0!==s.city.trim().length?"text-gray-900":"text-red-600"," text-lg font-semibold"),children:s.city||"Not set"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Required field"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province"}),"business"===q?(0,a.jsx)(h.Q,{value:s.state,onChange:e=>ee("state",e),countryCode:(null==(e=(0,N.EA)(s.country))?void 0:e.code)||"",placeholder:"Select your state/province"}):(0,a.jsx)("p",{className:"text-gray-900 text-lg font-semibold",children:s.state||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(s.country&&0!==s.country.trim().length?"text-gray-700":"text-red-600"),children:"Country *"}),"business"===q?(0,a.jsx)(m.b,{value:s.country,onChange:e=>ee("country",e),placeholder:"Select your country",required:!0,className:s.country&&0!==s.country.trim().length?"":"border-red-500 focus:border-red-500"}):(0,a.jsx)("p",{className:"".concat(s.country&&0!==s.country.trim().length?"text-gray-900":"text-red-600"," text-lg font-semibold"),children:s.country||"Not set"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Required field"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(M.A,{className:"h-5 w-5 text-green-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Subscription Plan"})]}),(null==u?void 0:u.plan)==="free"?(0,a.jsx)(d.$,{size:"sm",onClick:()=>Y.push("/pricing"),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"Upgrade Plan"}):(0,a.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>Y.push("/pricing"),children:"View Pricing"})]})}),(0,a.jsx)("div",{className:"p-6",children:u?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat("active"===u.status?"bg-green-500":"cancelled"===u.status?"bg-red-500":"bg-yellow-500")}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 capitalize",children:[u.plan&&u.plan.length>20?"Premium":u.plan," Plan"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 capitalize",children:["Status: ",u.status]}),u.billingCycle&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 capitalize",children:["Billing: ",u.billingCycle]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:["free"===u.plan?(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"â‚¹0"}):"starter"===u.plan?(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"â‚¹999"}):"growth"===u.plan?(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"â‚¹2,499"}):"scale"===u.plan?(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"â‚¹8,999"}):(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"-"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"per month"})]})]}),"free"===u.plan&&(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(z.A,{className:"h-5 w-5 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Upgrade to unlock more features!"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,a.jsx)("li",{children:"More AI content generations"}),(0,a.jsx)("li",{children:"Downloadable AI image enhancements"}),(0,a.jsx)("li",{children:"Unlimited media storage"}),(0,a.jsx)("li",{children:"Priority support"})]})}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(d.$,{onClick:()=>Y.push("/pricing"),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"View Plans & Upgrade"})})]})]})}),u.startDate&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Started"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(u.startDate).toLocaleDateString()})]}),u.endDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expires"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(u.endDate).toLocaleDateString()})]})]}),u&&"free"!==u.plan&&"active"===u.status&&(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Change Plan"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"View all available plans and upgrade or downgrade"})]}),(0,a.jsx)(d.$,{size:"sm",onClick:()=>Y.push("/pricing"),className:"bg-blue-600 hover:bg-blue-700",children:"View Plans"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Cancel Subscription"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"You can cancel your subscription at any time"})]}),(0,a.jsx)(d.$,{variant:"destructive",size:"sm",onClick:()=>O(!0),className:"bg-red-600 hover:bg-red-700",children:"Cancel Plan"})]})]})})]}):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Loading subscription information..."})})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(M.A,{className:"h-5 w-5 text-purple-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Usage Statistics"})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4 border border-purple-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-purple-700",children:"Post Generation Credits"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:n.generationCount}),(0,a.jsx)("p",{className:"text-xs text-purple-600",children:"AI post generations remaining"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(z.A,{className:"h-6 w-6 text-purple-600"})})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-orange-700",children:"Enhancement Credits"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:n.enhancementCredits}),(0,a.jsx)("p",{className:"text-xs text-orange-600",children:"AI image enhancements remaining"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(E.A,{className:"h-6 w-6 text-orange-600"})})]})})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"})," Enhancement credits are used when you enhance images with AI. You can purchase more credits or upgrade your plan to get additional credits."]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-blue-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Social Media Connections"})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(f,{})})]}),s.created_at&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 text-gray-600 mr-3"}),(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Information"})]})}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Created"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(s.created_at).toLocaleDateString()})]}),s.updated_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-gray-900",children:new Date(s.updated_at).toLocaleDateString()})]})]})})]})]})]}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-8 flex justify-end",children:(0,a.jsx)(d.$,{variant:"destructive",onClick:async()=>{await c.ND.auth.signOut(),Y.push("/login")},className:"mt-8",children:"Log Out"})}),L&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-3",children:(0,a.jsx)(S.A,{className:"w-5 h-5 text-red-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Cancel Subscription"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to cancel your subscription? This action cannot be undone."}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"What happens when you cancel:"}),(0,a.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,a.jsx)("li",{children:"â€¢ Your subscription will be cancelled immediately"}),(0,a.jsx)("li",{children:"â€¢ You'll be downgraded to the Free plan"}),(0,a.jsx)("li",{children:"â€¢ Your credits will be reset to Free plan limits"}),(0,a.jsx)("li",{children:"â€¢ You can resubscribe anytime"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>O(!1),className:"flex-1",disabled:R,children:"Keep Subscription"}),(0,a.jsx)(d.$,{variant:"destructive",onClick:Z,loading:R,className:"flex-1 bg-red-600 hover:bg-red-700",children:R?"Cancelling...":"Yes, Cancel"})]})]})})]})}function q(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}),children:(0,a.jsx)(F,{})})}},4416:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5339:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5684:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},7213:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},7550:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9947:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[3865,4277,6874,468,8441,1684,7358],()=>s(3076)),_N_E=e.O()}]);